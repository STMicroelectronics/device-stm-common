From 3eee2ca93d629f54991132081d970e6f3c9e4b56 Mon Sep 17 00:00:00 2001
From: frq09432 <nicolas.louboutin@st.com>
Date: Wed, 6 Nov 2019 17:18:18 +0100
Subject: [PATCH 1/3] Set fake vsync at 50Hz (instead of 60Hz)

Change-Id: I696c629b38937b15f4ffc5a78011b49351efccfc
---
 services/surfaceflinger/Scheduler/EventThread.cpp | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/services/surfaceflinger/Scheduler/EventThread.cpp b/services/surfaceflinger/Scheduler/EventThread.cpp
index 05bad4d..9635d7e 100644
--- a/services/surfaceflinger/Scheduler/EventThread.cpp
+++ b/services/surfaceflinger/Scheduler/EventThread.cpp
@@ -380,8 +380,8 @@ void EventThread::threadMain(std::unique_lock<std::mutex>& lock) {
             mCondition.wait(lock);
         } else {
             // Generate a fake VSYNC after a long timeout in case the driver stalls. When the
-            // display is off, keep feeding clients at 60 Hz.
-            const auto timeout = mState == State::SyntheticVSync ? 16ms : 1000ms;
+            // display is off, keep feeding clients at 50 Hz.
+            const auto timeout = mState == State::SyntheticVSync ? 20ms : 1000ms;
             if (mCondition.wait_for(lock, timeout) == std::cv_status::timeout) {
                 ALOGW_IF(mState == State::VSync, "Faking VSYNC due to driver stall");
 
-- 
2.7.4

