From 3b7789cf7ad85cea17764efb664cf0840d4b1315 Mon Sep 17 00:00:00 2001
From: frq09432 <nicolas.louboutin@st.com>
Date: Thu, 16 Jan 2020 17:15:58 +0100
Subject: [PATCH 2/3] EventThread force state initialization

Change-Id: I855de57bf4fc68ca5ffedea78a11d53a881b9095
---
 services/surfaceflinger/Scheduler/EventThread.cpp | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/services/surfaceflinger/Scheduler/EventThread.cpp b/services/surfaceflinger/Scheduler/EventThread.cpp
index d459bd9..2ca776b 100644
--- a/services/surfaceflinger/Scheduler/EventThread.cpp
+++ b/services/surfaceflinger/Scheduler/EventThread.cpp
@@ -304,6 +304,8 @@ void EventThread::onConfigChanged(PhysicalDisplayId displayId, int32_t configId)
 void EventThread::threadMain(std::unique_lock<std::mutex>& lock) {
     DisplayEventConsumers consumers;
 
+    mState = State::Idle;
+
     while (mState != State::Quit) {
         std::optional<DisplayEventReceiver::Event> event;
 
-- 
2.7.4

